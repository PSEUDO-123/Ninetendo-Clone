(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{85018:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return p}});var a=r(7771),s=r(46420),l=r(86743),i=r(64897),n=r(87136),o=r(58139),c=r(75668),u=(r(43291),r(90643)),d=r(52322);var p=!0;t.default=function(e){let{page:t,preview:r}=e;const p=(0,i.Z)(),h=t.content.pageHeader.heading,m=t.content?.productsCategoryUid,g=[{href:"/",title:"Home"},{href:"/store",title:"My Nintendo Store"},{href:"/store/games",title:"Games"},{href:"/store/games/best-sellers",title:h}],f=a.e.GAMES,b=(0,u.XD)({category:f,productsCategoryUid:m,merchandisedGrid:t?.content?.merchandisedGrid,router:p});return m?(0,d.jsx)(s.X$,{router:p,categoryConfig:b,defaultCategory:f,searchParamWhitelist:n.uy,preserveQueryParamKeys:n.aq,children:(0,d.jsx)(o.Z,{preview:r,breadcrumbLinks:g,page:t.content,pageIcon:"d-pad",cachePrefix:`${(0,l.GL)(h)}`,filterSections:a.I,analytics:{eventPrefix:`Best Sellers:${h}`,pageName:`Best Sellers PLP - ${h}`}})}):(0,d.jsx)(c.Z,{preview:r,breadcrumbLinks:g,page:t.content,filterSections:a.I,analytics:{pageName:`Best Sellers PLP - ${h}`}})}},75668:function(e,t,r){"use strict";var a=r(82269),s=r(95235),l=r(2784),i=r(5632),n=r.n(i),o=r(32899),c=r(97224),u=r(7771),d=r(46420),p=r(51505),h=r(89937),m=r(67335),g=r(1505),f=r(84510),b=r(15824),x=r(3005),y=r(66906),j=r(9873),v=r(32542),P=r(86743),S=r(67371),w=r(80963),k=r(57912),O=r(91042),M=(r(71105),r(87136)),F=r(72354),N=r(32075),C=r(11034),_=r(23682),L=r(42924),B=r(62898),H=r(52322);const X=["title","attribute"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const T="scroll-top-of-grid";t.Z=e=>{let{preview:t,breadcrumbLinks:r,filterSections:s,lightScrim:E,page:I,pageIcon:Z,showRating:z,analytics:R,enableHorizontalTiles:$,enableStickyCollectionNav:G,fullBleedHero:q,cmsProductPageSize:A}=e;const{pageHeader:V,ctaCollection:U,merchandisedGrid:K,legalText:Q,marketingPage:J}=I||{},W=J?L[J?.templateName??"plmpStandard"]:null,Y=(0,S.O_)(),{text:ee}=(0,o.i1)(),{trackLoadMoreProducts:te}=(0,u.u)(),re=(0,i.useRouter)(),{asPath:ae,pathname:se,locale:le}=re,ie=(0,o.SS)("wdev-1631-horizontal-tiles"),ne=ie?.variant?.payload?.value,oe=$&&"horizontal"===ne,ce=(0,o.uX)(ae),ue=(0,l.useRef)(),{0:de,1:pe}=(0,l.useState)((()=>M.Xx.find((e=>{let{param:t}=e;return t===ce.sort}))?.value||M.Xx[0].value)),{0:he,1:me}=(0,l.useState)((()=>parseInt(ce.p)||0)),{isFilterModalOpen:ge,selectedSortByOption:fe,toggleModalFiltersMenu:be,handleSortByChange:xe}=(0,d.sI)({sortBy:de,sortByOptions:M.Xx,analytics:R,applySortBy:e=>{pe((()=>e))}}),ye=(0,l.useMemo)((()=>M.Xx.map((e=>{let{value:t,label:r}=e;return{value:t,label:ee(r)}}))),[ee]),je=(0,l.useMemo)((()=>({value:fe.value,label:ee(fe.label)})),[fe,ee]),ve=(0,l.useMemo)((()=>s.map((e=>e.attribute===u.z.ESRB_RATING&&M.bh[le]||e))),[le,s]),Pe=(0,l.useMemo)((()=>ve.map((e=>{let{attribute:t}=e;return t}))),[ve]),Se=(K||[]).flat(),we=(K||[]).flat().filter((e=>{let{sku:t}=e;return Boolean(t)})),{appliedFilters:ke,appliedFiltersQuery:Oe,filteredProducts:Me,filteredState:Fe,refine:Ne,refineByQuery:Ce,clearFilters:_e}=(0,S.x3)(we,Pe,{operator:S.fP.AND,queryToInitializeFilters:ce}),Le=0===ke?.length&&fe.value===M.Xx[0].value,Be=(0,w.Z)(w.o.DESKTOP),He=(0,l.useRef)();He.current=Be;const Xe=Le?Se:Me,Ee=(0,l.useMemo)((()=>Xe.slice(0,(A||Xe.length)*(he+1))),[he,Xe,A]),De=Ee.length<Xe.length,Te=(0,l.useMemo)((()=>de?[...Ee].sort(de("name")):Ee),[Ee,de]),Ie=(0,l.useCallback)((e=>{const t=M.Xx.find((e=>{let{value:t}=e;return t===de}))?.param||M.Xx[0].value;return`#${new URLSearchParams(D(D({},e),{},{sort:t,p:he})).toString()}`}),[de,he]),Ze=(0,l.useCallback)((e=>(me((()=>0)),e)),[]),ze=(0,l.useCallback)((function(){Ze(Ne)(...arguments)}),[Ne,Ze]),Re=(0,l.useCallback)((function(){Ze(_e)(...arguments)}),[_e,Ze]),$e=(0,l.useCallback)((function(){Ze(xe)(...arguments)}),[xe,Ze]),Ge=(0,l.useCallback)((()=>{const{pageName:e}=R;te(e);const t=(0,o.uX)(),r=he+1;t.p=r,me((()=>r))}),[he,R,te]),qe=(0,l.useMemo)((()=>Ie(Oe)),[Oe,Ie]),Ae=(0,l.useMemo)((()=>ke.map((e=>({attribute:e.split(S.HA)[0],label:e.split(S.HA)[1],value:e})))),[ke]),Ve=(0,l.useMemo)((()=>ve.filter((e=>{let{attribute:t}=e;return Fe[t]?.items?.length>0})).map(((e,t)=>{let{title:r,attribute:s}=e,l=(0,a.Z)(e,X);return(0,H.jsx)(O.vT,D({attribute:s,title:r&&ee(r),startCollapsed:0!==t,refine:ze,items:Fe[s]?.items||[],showMoreLabel:ee("Show more"),showLessLabel:ee("Show less"),collapsible:!0,limit:5,showMore:!0,analytics:{pageName:R?.pageName}},l),s)}))),[ve,Fe,ze,ee,R]),Ue=(0,l.useMemo)((()=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(O.en,{$singleColumnMobile:oe,children:Te.map(((e,t)=>e.sku?(0,H.jsx)(v.I8,D(D({featureFlag:ie?.id,featureFlagVariant:ne},e),{},{constrain:!1,showRating:z||Boolean(re.query[F.Tx.UTM_CODE])||!1,mobileHorizontal:oe,analytics:{listDetails:{id:`clp-${(0,P.GL)(R.pageName)}`,name:R.pageName}}}),e.sku+t):(0,H.jsx)(C.Z,{asset:e.asset.primary.assetPath,cta:e.cta,heading:e.heading},e.heading+t)))}),De&&(0,H.jsx)(B.VR,{children:(0,H.jsx)(m.B,{variant:"tertiary",icon:g.Z,onClick:Ge,children:ee("Load more")})})]})),[re.query,R,z,De,Te,ie,ne,oe,Ge,ee]);(0,k.Z)({isDesktop:Be,scrollToRef:ue,scrollToElementID:T,enableStickyCollectionNav:G,pillFarm:U.list}),(0,l.useEffect)((()=>{n().push({pathname:n().pathname,query:n().query,hash:qe},null,{shallow:!0}).catch((e=>{if(!e.cancelled)throw e}))}),[qe]),(0,P.nw)((()=>{const e=(0,o.uX)(ae),t=M.Xx.find((t=>{let{param:r}=t;return r===e.sort}))?.value||M.Xx[0].value;Ce(e),pe((()=>t)),me(parseInt(e.p)||0)})),(0,l.useEffect)((()=>{!0===He.current&&ue.current&&(0,P.n5)(ue.current)}),[ke.length]);const Ke=(0,l.useMemo)((()=>r?(0,H.jsx)(f.B,{currentPage:se,children:r.map(((e,t)=>(0,H.jsx)(c.Z,{href:e.href,children:(0,H.jsx)("a",{children:ee(e.title)})},e.title+t)))}):null),[r,ee,se]),Qe=(0,l.useMemo)((()=>q?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(b.F,{heading:V.heading,subtitle:V.description,image:{desktop:{assetPath:V.asset?.primary?.assetPath},mobile:{assetPath:V.asset?.secondary?.assetPath}},pillFarm:U.list,icon:Z}),(0,H.jsx)(O.Hr,{})]}):(0,H.jsx)(O.tm,{iconName:Z,content:{assetPath:V.asset?.primary?.assetPath,assetPathAlt:V.asset?.alt,background:V.background,cta:V.cta,description:V.description,heading:V.heading,modifiers:V.modifiers},lightScrim:E})),[V,q,Z,E,U]);return(0,H.jsxs)(_.Kq,{preview:t,children:[J&&(0,H.jsx)(x.H.NewLevel,{children:(0,H.jsx)(W,{marketingPage:J})}),r&&(0,H.jsx)(O.JL,{children:Ke}),V.asset?.primary?.assetPath&&Qe,(0,H.jsxs)(x.H.NewLevel,{children:[!q&&U?.list.length>0&&(0,H.jsx)(O.$0,{constrained:!0,small:!0,divider:["bottom"],children:(0,H.jsx)(O.l6,{center:!0,items:U.list})}),(0,H.jsx)("span",{ref:ue,id:"products","data-drawer-id":T}),(0,H.jsx)(y.S,{size:48,axis:"vertical"}),(0,H.jsxs)(O.He,{children:[(0,H.jsxs)(B.zB,{$breadcrumbs:!!r,children:[(0,H.jsx)(p.D,{children:Ke}),(0,H.jsx)(h.S,{label:ee("Sort by"),onSelect:$e,options:ye,dropdownValue:Y?je:null}),(0,H.jsx)(p.M,{children:(0,H.jsx)(O.Lb,{icon:j.Z,variant:"tertiary",onClick:be,children:ee("Filter")})})]}),(0,H.jsx)(y.S,{size:32,axis:"vertical"}),(0,H.jsx)(O.dA,{enableStickyFilterPanel:!0,isFilterModalOpen:ge,toggleModalFiltersMenu:be,attributeFilterSets:Ve,isDesktop:Be,stickyOffset:G&&parseInt(N.TH)+16,customizeFilters:{clearFilters:Re,removeFilter:ze,activeFilters:Ae,totalHits:Me.length},children:Ue}),Q&&(0,H.jsx)(B.VH,{children:(0,H.jsx)(O.Ho,{data:Q,textVariant:"legal"})})]}),(0,H.jsx)(O.y4,{})]})]})}},25411:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/games/best-sellers",function(){return r(85018)}])}},function(e){e.O(0,[5106,8286,4511,6717,1042,3682,7705,8139,9774,2888,179],(function(){return t=25411,e(e.s=t);var t}));var t=e.O();_N_E=t}]);