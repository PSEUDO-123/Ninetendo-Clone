(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5907],{28198:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return d}});var a=r(64897),s=r(7771),l=r(46420),i=r(87136),n=r(58139),o=r(75668),c=(r(43291),r(90643)),u=r(52322);var d=!0;t.default=function(e){let{page:t,preview:r}=e;const d=(0,a.Z)(),p=t.content?.productsCategoryUid,h=[{href:"/",title:"Home"},{href:"/store",title:"My Nintendo Store"},{href:"/store/exclusives",title:"Exclusives"}],m=s.e.ALL_PRODUCTS,f=(0,c.XD)({category:m,productsCategoryUid:p,merchandisedGrid:t?.content?.merchandisedGrid,router:d});return p?(0,u.jsx)(l.X$,{router:d,categoryConfig:f,defaultCategory:m,searchParamWhitelist:i.uy,preserveQueryParamKeys:i.aq,children:(0,u.jsx)(n.Z,{preview:r,breadcrumbLinks:h,page:t.content,pageIcon:"star",cachePrefix:"exclusives",filterSections:i.Mv,analytics:{eventPrefix:"Exclusives",pageName:"Exclusives PLP"},fullBleedHero:!0})}):(0,u.jsx)(o.Z,{preview:r,breadcrumbLinks:h,page:t.content,filterSections:i.Mv,analytics:{pageName:"Exclusives PLP"}})}},75668:function(e,t,r){"use strict";var a=r(82269),s=r(95235),l=r(2784),i=r(5632),n=r.n(i),o=r(32899),c=r(97224),u=r(7771),d=r(46420),p=r(51505),h=r(89937),m=r(67335),f=r(1505),g=r(84510),x=r(15824),b=r(3005),y=r(66906),v=r(9873),j=r(32542),P=r(86743),S=r(67371),w=r(80963),k=r(57912),O=r(91042),M=(r(71105),r(87136)),C=r(72354),F=r(32075),N=r(11034),_=r(23682),L=r(42924),E=r(62898),H=r(52322);const X=["title","attribute"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const T="scroll-top-of-grid";t.Z=e=>{let{preview:t,breadcrumbLinks:r,filterSections:s,lightScrim:B,page:Z,pageIcon:z,showRating:R,analytics:I,enableHorizontalTiles:q,enableStickyCollectionNav:A,fullBleedHero:$,cmsProductPageSize:G}=e;const{pageHeader:U,ctaCollection:V,merchandisedGrid:K,legalText:Q,marketingPage:J}=Z||{},W=J?L[J?.templateName??"plmpStandard"]:null,Y=(0,S.O_)(),{text:ee}=(0,o.i1)(),{trackLoadMoreProducts:te}=(0,u.u)(),re=(0,i.useRouter)(),{asPath:ae,pathname:se,locale:le}=re,ie=(0,o.SS)("wdev-1631-horizontal-tiles"),ne=ie?.variant?.payload?.value,oe=q&&"horizontal"===ne,ce=(0,o.uX)(ae),ue=(0,l.useRef)(),{0:de,1:pe}=(0,l.useState)((()=>M.Xx.find((e=>{let{param:t}=e;return t===ce.sort}))?.value||M.Xx[0].value)),{0:he,1:me}=(0,l.useState)((()=>parseInt(ce.p)||0)),{isFilterModalOpen:fe,selectedSortByOption:ge,toggleModalFiltersMenu:xe,handleSortByChange:be}=(0,d.sI)({sortBy:de,sortByOptions:M.Xx,analytics:I,applySortBy:e=>{pe((()=>e))}}),ye=(0,l.useMemo)((()=>M.Xx.map((e=>{let{value:t,label:r}=e;return{value:t,label:ee(r)}}))),[ee]),ve=(0,l.useMemo)((()=>({value:ge.value,label:ee(ge.label)})),[ge,ee]),je=(0,l.useMemo)((()=>s.map((e=>e.attribute===u.z.ESRB_RATING&&M.bh[le]||e))),[le,s]),Pe=(0,l.useMemo)((()=>je.map((e=>{let{attribute:t}=e;return t}))),[je]),Se=(K||[]).flat(),we=(K||[]).flat().filter((e=>{let{sku:t}=e;return Boolean(t)})),{appliedFilters:ke,appliedFiltersQuery:Oe,filteredProducts:Me,filteredState:Ce,refine:Fe,refineByQuery:Ne,clearFilters:_e}=(0,S.x3)(we,Pe,{operator:S.fP.AND,queryToInitializeFilters:ce}),Le=0===ke?.length&&ge.value===M.Xx[0].value,Ee=(0,w.Z)(w.o.DESKTOP),He=(0,l.useRef)();He.current=Ee;const Xe=Le?Se:Me,Be=(0,l.useMemo)((()=>Xe.slice(0,(G||Xe.length)*(he+1))),[he,Xe,G]),De=Be.length<Xe.length,Te=(0,l.useMemo)((()=>de?[...Be].sort(de("name")):Be),[Be,de]),Ze=(0,l.useCallback)((e=>{const t=M.Xx.find((e=>{let{value:t}=e;return t===de}))?.param||M.Xx[0].value;return`#${new URLSearchParams(D(D({},e),{},{sort:t,p:he})).toString()}`}),[de,he]),ze=(0,l.useCallback)((e=>(me((()=>0)),e)),[]),Re=(0,l.useCallback)((function(){ze(Fe)(...arguments)}),[Fe,ze]),Ie=(0,l.useCallback)((function(){ze(_e)(...arguments)}),[_e,ze]),qe=(0,l.useCallback)((function(){ze(be)(...arguments)}),[be,ze]),Ae=(0,l.useCallback)((()=>{const{pageName:e}=I;te(e);const t=(0,o.uX)(),r=he+1;t.p=r,me((()=>r))}),[he,I,te]),$e=(0,l.useMemo)((()=>Ze(Oe)),[Oe,Ze]),Ge=(0,l.useMemo)((()=>ke.map((e=>({attribute:e.split(S.HA)[0],label:e.split(S.HA)[1],value:e})))),[ke]),Ue=(0,l.useMemo)((()=>je.filter((e=>{let{attribute:t}=e;return Ce[t]?.items?.length>0})).map(((e,t)=>{let{title:r,attribute:s}=e,l=(0,a.Z)(e,X);return(0,H.jsx)(O.vT,D({attribute:s,title:r&&ee(r),startCollapsed:0!==t,refine:Re,items:Ce[s]?.items||[],showMoreLabel:ee("Show more"),showLessLabel:ee("Show less"),collapsible:!0,limit:5,showMore:!0,analytics:{pageName:I?.pageName}},l),s)}))),[je,Ce,Re,ee,I]),Ve=(0,l.useMemo)((()=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(O.en,{$singleColumnMobile:oe,children:Te.map(((e,t)=>e.sku?(0,H.jsx)(j.I8,D(D({featureFlag:ie?.id,featureFlagVariant:ne},e),{},{constrain:!1,showRating:R||Boolean(re.query[C.Tx.UTM_CODE])||!1,mobileHorizontal:oe,analytics:{listDetails:{id:`clp-${(0,P.GL)(I.pageName)}`,name:I.pageName}}}),e.sku+t):(0,H.jsx)(N.Z,{asset:e.asset.primary.assetPath,cta:e.cta,heading:e.heading},e.heading+t)))}),De&&(0,H.jsx)(E.VR,{children:(0,H.jsx)(m.B,{variant:"tertiary",icon:f.Z,onClick:Ae,children:ee("Load more")})})]})),[re.query,I,R,De,Te,ie,ne,oe,Ae,ee]);(0,k.Z)({isDesktop:Ee,scrollToRef:ue,scrollToElementID:T,enableStickyCollectionNav:A,pillFarm:V.list}),(0,l.useEffect)((()=>{n().push({pathname:n().pathname,query:n().query,hash:$e},null,{shallow:!0}).catch((e=>{if(!e.cancelled)throw e}))}),[$e]),(0,P.nw)((()=>{const e=(0,o.uX)(ae),t=M.Xx.find((t=>{let{param:r}=t;return r===e.sort}))?.value||M.Xx[0].value;Ne(e),pe((()=>t)),me(parseInt(e.p)||0)})),(0,l.useEffect)((()=>{!0===He.current&&ue.current&&(0,P.n5)(ue.current)}),[ke.length]);const Ke=(0,l.useMemo)((()=>r?(0,H.jsx)(g.B,{currentPage:se,children:r.map(((e,t)=>(0,H.jsx)(c.Z,{href:e.href,children:(0,H.jsx)("a",{children:ee(e.title)})},e.title+t)))}):null),[r,ee,se]),Qe=(0,l.useMemo)((()=>$?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(x.F,{heading:U.heading,subtitle:U.description,image:{desktop:{assetPath:U.asset?.primary?.assetPath},mobile:{assetPath:U.asset?.secondary?.assetPath}},pillFarm:V.list,icon:z}),(0,H.jsx)(O.Hr,{})]}):(0,H.jsx)(O.tm,{iconName:z,content:{assetPath:U.asset?.primary?.assetPath,assetPathAlt:U.asset?.alt,background:U.background,cta:U.cta,description:U.description,heading:U.heading,modifiers:U.modifiers},lightScrim:B})),[U,$,z,B,V]);return(0,H.jsxs)(_.Kq,{preview:t,children:[J&&(0,H.jsx)(b.H.NewLevel,{children:(0,H.jsx)(W,{marketingPage:J})}),r&&(0,H.jsx)(O.JL,{children:Ke}),U.asset?.primary?.assetPath&&Qe,(0,H.jsxs)(b.H.NewLevel,{children:[!$&&V?.list.length>0&&(0,H.jsx)(O.$0,{constrained:!0,small:!0,divider:["bottom"],children:(0,H.jsx)(O.l6,{center:!0,items:V.list})}),(0,H.jsx)("span",{ref:ue,id:"products","data-drawer-id":T}),(0,H.jsx)(y.S,{size:48,axis:"vertical"}),(0,H.jsxs)(O.He,{children:[(0,H.jsxs)(E.zB,{$breadcrumbs:!!r,children:[(0,H.jsx)(p.D,{children:Ke}),(0,H.jsx)(h.S,{label:ee("Sort by"),onSelect:qe,options:ye,dropdownValue:Y?ve:null}),(0,H.jsx)(p.M,{children:(0,H.jsx)(O.Lb,{icon:v.Z,variant:"tertiary",onClick:xe,children:ee("Filter")})})]}),(0,H.jsx)(y.S,{size:32,axis:"vertical"}),(0,H.jsx)(O.dA,{enableStickyFilterPanel:!0,isFilterModalOpen:fe,toggleModalFiltersMenu:xe,attributeFilterSets:Ue,isDesktop:Ee,stickyOffset:A&&parseInt(F.TH)+16,customizeFilters:{clearFilters:Ie,removeFilter:Re,activeFilters:Ge,totalHits:Me.length},children:Ve}),Q&&(0,H.jsx)(E.VH,{children:(0,H.jsx)(O.Ho,{data:Q,textVariant:"legal"})})]}),(0,H.jsx)(O.y4,{})]})]})}},35131:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/exclusives",function(){return r(28198)}])}},function(e){e.O(0,[5106,8286,4511,6717,1042,3682,7705,8139,9774,2888,179],(function(){return t=35131,e(e.s=t);var t}));var t=e.O();_N_E=t}]);