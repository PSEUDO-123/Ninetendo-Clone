(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8417],{36192:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return h}});var r=a(7771),s=a(46420),l=a(86743),i=a(64897),n=a(87136),o=a(58139),c=a(75668),u=(a(43291),a(90643)),d=a(80963),p=a(52322);var h=!0;t.default=function(e){let{page:t,preview:a}=e;const h=(0,i.Z)(),m=t.content.pageHeader.heading,g=t.content?.productsCategoryUid,f="new-releases"===h.query.slug,b=(0,d.Z)(d.o.TABLET_SMALL),x=[{href:"/",title:"Home"},{href:"/store",title:"My Nintendo Store"},{href:"/store/games",title:"Games"},{href:"/store/games/[slug]",title:m}],y=r.e.GAMES,j=(0,u.XD)({category:y,productsCategoryUid:g,merchandisedGrid:t?.content?.merchandisedGrid,router:h});return g?(0,p.jsx)(s.X$,{router:h,categoryConfig:j,defaultCategory:y,searchParamWhitelist:n.uy,preserveQueryParamKeys:n.aq,children:(0,p.jsx)(o.Z,{preview:a,breadcrumbLinks:x,page:t.content,pageIcon:"d-pad",cachePrefix:`${(0,l.GL)(m)}`,filterSections:r.I,analytics:{eventPrefix:`Games:${m}`,pageName:`Games PLP - ${m}`}})}):(0,p.jsx)(c.Z,{preview:a,breadcrumbLinks:x,page:t.content,showRating:t.showRating,filterSections:r.I,analytics:{pageName:`Games PLP - ${m}`},enableHorizontalTiles:f&&!b})}},75668:function(e,t,a){"use strict";var r=a(82269),s=a(95235),l=a(2784),i=a(5632),n=a.n(i),o=a(32899),c=a(97224),u=a(7771),d=a(46420),p=a(51505),h=a(89937),m=a(67335),g=a(1505),f=a(84510),b=a(15824),x=a(3005),y=a(66906),j=a(9873),v=a(32542),P=a(86743),S=a(67371),w=a(80963),k=a(57912),M=a(91042),O=(a(71105),a(87136)),F=a(72354),N=a(32075),C=a(11034),L=a(23682),_=a(42924),H=a(62898),T=a(52322);const X=["title","attribute"];function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const D="scroll-top-of-grid";t.Z=e=>{let{preview:t,breadcrumbLinks:a,filterSections:s,lightScrim:E,page:Z,pageIcon:z,showRating:I,analytics:R,enableHorizontalTiles:G,enableStickyCollectionNav:$,fullBleedHero:A,cmsProductPageSize:q}=e;const{pageHeader:V,ctaCollection:U,merchandisedGrid:K,legalText:Q,marketingPage:J}=Z||{},W=J?_[J?.templateName??"plmpStandard"]:null,Y=(0,S.O_)(),{text:ee}=(0,o.i1)(),{trackLoadMoreProducts:te}=(0,u.u)(),ae=(0,i.useRouter)(),{asPath:re,pathname:se,locale:le}=ae,ie=(0,o.SS)("wdev-1631-horizontal-tiles"),ne=ie?.variant?.payload?.value,oe=G&&"horizontal"===ne,ce=(0,o.uX)(re),ue=(0,l.useRef)(),{0:de,1:pe}=(0,l.useState)((()=>O.Xx.find((e=>{let{param:t}=e;return t===ce.sort}))?.value||O.Xx[0].value)),{0:he,1:me}=(0,l.useState)((()=>parseInt(ce.p)||0)),{isFilterModalOpen:ge,selectedSortByOption:fe,toggleModalFiltersMenu:be,handleSortByChange:xe}=(0,d.sI)({sortBy:de,sortByOptions:O.Xx,analytics:R,applySortBy:e=>{pe((()=>e))}}),ye=(0,l.useMemo)((()=>O.Xx.map((e=>{let{value:t,label:a}=e;return{value:t,label:ee(a)}}))),[ee]),je=(0,l.useMemo)((()=>({value:fe.value,label:ee(fe.label)})),[fe,ee]),ve=(0,l.useMemo)((()=>s.map((e=>e.attribute===u.z.ESRB_RATING&&O.bh[le]||e))),[le,s]),Pe=(0,l.useMemo)((()=>ve.map((e=>{let{attribute:t}=e;return t}))),[ve]),Se=(K||[]).flat(),we=(K||[]).flat().filter((e=>{let{sku:t}=e;return Boolean(t)})),{appliedFilters:ke,appliedFiltersQuery:Me,filteredProducts:Oe,filteredState:Fe,refine:Ne,refineByQuery:Ce,clearFilters:Le}=(0,S.x3)(we,Pe,{operator:S.fP.AND,queryToInitializeFilters:ce}),_e=0===ke?.length&&fe.value===O.Xx[0].value,He=(0,w.Z)(w.o.DESKTOP),Te=(0,l.useRef)();Te.current=He;const Xe=_e?Se:Oe,Ee=(0,l.useMemo)((()=>Xe.slice(0,(q||Xe.length)*(he+1))),[he,Xe,q]),Be=Ee.length<Xe.length,De=(0,l.useMemo)((()=>de?[...Ee].sort(de("name")):Ee),[Ee,de]),Ze=(0,l.useCallback)((e=>{const t=O.Xx.find((e=>{let{value:t}=e;return t===de}))?.param||O.Xx[0].value;return`#${new URLSearchParams(B(B({},e),{},{sort:t,p:he})).toString()}`}),[de,he]),ze=(0,l.useCallback)((e=>(me((()=>0)),e)),[]),Ie=(0,l.useCallback)((function(){ze(Ne)(...arguments)}),[Ne,ze]),Re=(0,l.useCallback)((function(){ze(Le)(...arguments)}),[Le,ze]),Ge=(0,l.useCallback)((function(){ze(xe)(...arguments)}),[xe,ze]),$e=(0,l.useCallback)((()=>{const{pageName:e}=R;te(e);const t=(0,o.uX)(),a=he+1;t.p=a,me((()=>a))}),[he,R,te]),Ae=(0,l.useMemo)((()=>Ze(Me)),[Me,Ze]),qe=(0,l.useMemo)((()=>ke.map((e=>({attribute:e.split(S.HA)[0],label:e.split(S.HA)[1],value:e})))),[ke]),Ve=(0,l.useMemo)((()=>ve.filter((e=>{let{attribute:t}=e;return Fe[t]?.items?.length>0})).map(((e,t)=>{let{title:a,attribute:s}=e,l=(0,r.Z)(e,X);return(0,T.jsx)(M.vT,B({attribute:s,title:a&&ee(a),startCollapsed:0!==t,refine:Ie,items:Fe[s]?.items||[],showMoreLabel:ee("Show more"),showLessLabel:ee("Show less"),collapsible:!0,limit:5,showMore:!0,analytics:{pageName:R?.pageName}},l),s)}))),[ve,Fe,Ie,ee,R]),Ue=(0,l.useMemo)((()=>(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(M.en,{$singleColumnMobile:oe,children:De.map(((e,t)=>e.sku?(0,T.jsx)(v.I8,B(B({featureFlag:ie?.id,featureFlagVariant:ne},e),{},{constrain:!1,showRating:I||Boolean(ae.query[F.Tx.UTM_CODE])||!1,mobileHorizontal:oe,analytics:{listDetails:{id:`clp-${(0,P.GL)(R.pageName)}`,name:R.pageName}}}),e.sku+t):(0,T.jsx)(C.Z,{asset:e.asset.primary.assetPath,cta:e.cta,heading:e.heading},e.heading+t)))}),Be&&(0,T.jsx)(H.VR,{children:(0,T.jsx)(m.B,{variant:"tertiary",icon:g.Z,onClick:$e,children:ee("Load more")})})]})),[ae.query,R,I,Be,De,ie,ne,oe,$e,ee]);(0,k.Z)({isDesktop:He,scrollToRef:ue,scrollToElementID:D,enableStickyCollectionNav:$,pillFarm:U.list}),(0,l.useEffect)((()=>{n().push({pathname:n().pathname,query:n().query,hash:Ae},null,{shallow:!0}).catch((e=>{if(!e.cancelled)throw e}))}),[Ae]),(0,P.nw)((()=>{const e=(0,o.uX)(re),t=O.Xx.find((t=>{let{param:a}=t;return a===e.sort}))?.value||O.Xx[0].value;Ce(e),pe((()=>t)),me(parseInt(e.p)||0)})),(0,l.useEffect)((()=>{!0===Te.current&&ue.current&&(0,P.n5)(ue.current)}),[ke.length]);const Ke=(0,l.useMemo)((()=>a?(0,T.jsx)(f.B,{currentPage:se,children:a.map(((e,t)=>(0,T.jsx)(c.Z,{href:e.href,children:(0,T.jsx)("a",{children:ee(e.title)})},e.title+t)))}):null),[a,ee,se]),Qe=(0,l.useMemo)((()=>A?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.F,{heading:V.heading,subtitle:V.description,image:{desktop:{assetPath:V.asset?.primary?.assetPath},mobile:{assetPath:V.asset?.secondary?.assetPath}},pillFarm:U.list,icon:z}),(0,T.jsx)(M.Hr,{})]}):(0,T.jsx)(M.tm,{iconName:z,content:{assetPath:V.asset?.primary?.assetPath,assetPathAlt:V.asset?.alt,background:V.background,cta:V.cta,description:V.description,heading:V.heading,modifiers:V.modifiers},lightScrim:E})),[V,A,z,E,U]);return(0,T.jsxs)(L.Kq,{preview:t,children:[J&&(0,T.jsx)(x.H.NewLevel,{children:(0,T.jsx)(W,{marketingPage:J})}),a&&(0,T.jsx)(M.JL,{children:Ke}),V.asset?.primary?.assetPath&&Qe,(0,T.jsxs)(x.H.NewLevel,{children:[!A&&U?.list.length>0&&(0,T.jsx)(M.$0,{constrained:!0,small:!0,divider:["bottom"],children:(0,T.jsx)(M.l6,{center:!0,items:U.list})}),(0,T.jsx)("span",{ref:ue,id:"products","data-drawer-id":D}),(0,T.jsx)(y.S,{size:48,axis:"vertical"}),(0,T.jsxs)(M.He,{children:[(0,T.jsxs)(H.zB,{$breadcrumbs:!!a,children:[(0,T.jsx)(p.D,{children:Ke}),(0,T.jsx)(h.S,{label:ee("Sort by"),onSelect:Ge,options:ye,dropdownValue:Y?je:null}),(0,T.jsx)(p.M,{children:(0,T.jsx)(M.Lb,{icon:j.Z,variant:"tertiary",onClick:be,children:ee("Filter")})})]}),(0,T.jsx)(y.S,{size:32,axis:"vertical"}),(0,T.jsx)(M.dA,{enableStickyFilterPanel:!0,isFilterModalOpen:ge,toggleModalFiltersMenu:be,attributeFilterSets:Ve,isDesktop:He,stickyOffset:$&&parseInt(N.TH)+16,customizeFilters:{clearFilters:Re,removeFilter:Ie,activeFilters:qe,totalHits:Oe.length},children:Ue}),Q&&(0,T.jsx)(H.VH,{children:(0,T.jsx)(M.Ho,{data:Q,textVariant:"legal"})})]}),(0,T.jsx)(M.y4,{})]})]})}},86236:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/games/[slug]",function(){return a(36192)}])}},function(e){e.O(0,[5106,8286,4511,6717,1042,3682,7705,8139,9774,2888,179],(function(){return t=86236,e(e.s=t);var t}));var t=e.O();_N_E=t}]);